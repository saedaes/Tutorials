<!DOCTYPE html>
<html>
  <head>
      <title>Asesor&iacute;as FCQ</title>
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

      <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
      <%= stylesheet_link_tag 'open-iconic-master/font/css/open-iconic-bootstrap.css', media: 'all'%>
      <%= stylesheet_link_tag 'date-picker/bootstrap-datepicker.css', media: 'all'%>
      <%= stylesheet_link_tag 'data-table/datatables.css', media: 'all'%>

      <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
      <%= javascript_include_tag 'date-picker/bootstrap-datepicker.js', 'data-turbolinks-track': 'reload' %>
      <%= javascript_include_tag 'date-picker/locales/bootstrap-datepicker.es.min.js', 'data-turbolinks-track': 'reload' %>
      <%= javascript_include_tag 'data-table/datatables.min.js', 'data-turbolinks-track': 'reload' %>
  </head>
  <body>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>Matr&iacute;cula</th>
          <th>Nombre</th>
          <th>Apellidos</th>
          <th></th>
        </tr>
      </thead>

      <tbody>
        <% @students.each do |student| %>
          <tr>
            <td class="student"><%= student.Register %></td>
            <td><%= student.Name %></td>
            <td><%= student.LastName %> <%= student.SecondLastName %></td>
            <td><button type="button" class="btn btn-outline-info btn-select" style="width:100%;">Seleccionar</button></td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <script type="text/javascript">
      $(document).ready(function(){
        $('.table').DataTable({
          "info": false,
          "lengthChange": false,
          language:{
            search:"Buscar",
            emptyTable:"Sin Datos",
            zeroRecords:"No se econtraron registros",
            paginate:{
              first:"Inicio",
              previous:"Anterior",
              next:"Siguiente",
              last:"Final" 
            }
          }
        });
      });

      $('.btn-select').click(function(){
        var student = $(this).parent().parent().find('.student').text();

        parent.getStudent(student);

        $('#btnCloseStudent', window.parent.document).trigger('click');
      });
    </script>
  </body>
</html>